
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Generative AI Action &#8212; Generative AI Action 1.0.4 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=7ba0cc49"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Main';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="License" href="license.html" />
    <link rel="prev" title="Generative AI Action" href="index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
  
    <p class="title logo__title">Generative AI Action 1.0.4 documentation</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Generative AI Action</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="back-to-main.html">Back to main documentation</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/Main.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Generative AI Action</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">Overview</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#install-the-action">Install the Action</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#takuma-multi-control-net">Takuma Multi Control Net</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-open-pose-images-by-paint-pose-action">Create open pose images by paint pose action</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#add-control-net-action-to-your-catharsys-config">Add control net action to your catharsys config</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#futher-remarks">Futher remarks</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <!---
<LICENSE id="CC BY-SA 4.0">
    
    Image-Render Automation Functions module documentation
    Copyright 2022 Robert Bosch GmbH and its subsidiaries
    
    This work is licensed under the 
    
        Creative Commons Attribution-ShareAlike 4.0 International License.
    
    To view a copy of this license, visit 
        http://creativecommons.org/licenses/by-sa/4.0/ 
    or send a letter to 
        Creative Commons, PO Box 1866, Mountain View, CA 94042, USA.
    
</LICENSE>
--->
<section id="generative-ai-action">
<h1>Generative AI Action<a class="headerlink" href="#generative-ai-action" title="Link to this heading">#</a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">#</a></h2>
<p>This catharsys plugin adds functionality for using generative models to
enhance or create new synthetic data based on renderings from catharsys.</p>
<p>Currently, the following methods are available:</p>
<ul class="simple">
<li><p>Takuma’s Multi Control net for diffusers</p></li>
<li><p>(Control Net Nightly, deprecated)</p></li>
</ul>
<p>Since the dependencies of the methods differ from each other and from
catharsys, for each method a separate and new conda environment has
to be created. To do so, call the respective scripts.</p>
</section>
<section id="install-the-action">
<h2>Install the Action<a class="headerlink" href="#install-the-action" title="Link to this heading">#</a></h2>
<p>To use the generative actions, you need to install them into your Catharsys workspace. If you have a development installation change into the <code class="docutils literal notranslate"><span class="pre">image-render-generative</span></code> folder and execute the command <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-e</span> <span class="pre">.</span></code>. Otherwise, execute <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">.</span></code> from within the folder. Now the actions are available from Catharsys configurations.</p>
</section>
<section id="takuma-multi-control-net">
<h2>Takuma Multi Control Net<a class="headerlink" href="#takuma-multi-control-net" title="Link to this heading">#</a></h2>
<p>This model is based on the implementation of github user takuma104:</p>
<p>https://github.com/takuma104/diffusers/tree/multi_controlnet</p>
<p>This implementation is a fork of the popular python package diffusers.
To setup the conda environment, download and install the repository
and download all the needed model files, simply call</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>bash scripts/get_takuma_diffusers.sh
</pre></div>
</div>
<p>Under Windows you can use the PowerShell script</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>./scripts/get_takuma_diffusers.ps1
</pre></div>
</div>
<p>Note that the PowerShell script contains specific version numbers of the various modules that are needed to make everything work.</p>
<p>This also downloads additional networks into the ./models folder with
git lfs. Make sure git lfs is available before calling the script.
Also, consider to remove the .git folder in the models folder to save.
Also you can directly point to a different location in your catharsys
config files.</p>
<p>However, we suggest to perform the steps manually one after another and
also store the additional model files not directly in this module, but
at a central location and reuse it from there.</p>
<p>To use takumas multi control net, you need to first add a pose painting
step to your actions and then add the generative step.</p>
<section id="create-open-pose-images-by-paint-pose-action">
<h3>Create open pose images by paint pose action<a class="headerlink" href="#create-open-pose-images-by-paint-pose-action" title="Link to this heading">#</a></h3>
<p>To add pose painting to your config, add the following in the respective files:</p>
<p>manifest.json5:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>// ...
paint_pose: {
    sDTI: &quot;manifest/action:1&quot;,
    lConfigs: [
        { sId: &quot;paint_pose_config&quot;, sDTI: &quot;/catharsys/generative/paint_pose_data:1&quot;, sForm: &quot;file/json&quot;, bAddToPath: false }
    ],
    lDeps: [ &quot;label&quot; ] // &lt;- this should be the name of the action you use for  labeling
},
// ...
</pre></div>
</div>
<p>trial.json5:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>// ...
mConfigs: {
    ... 
    paint_pose_config: [ &quot;../generative/openpose&quot;],
    ...
},
// ...
</pre></div>
</div>
<p>launch.json5:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>// ...
&quot;paint_pose&quot;: {
    sDTI: &quot;/catharsys/launch/action:1.0&quot;,
    sActionDTI: &quot;/catharsys/action/generative/paint_pose:1.0&quot;,
    mConfig: {
        sDTI: &quot;/catharsys/launch/args:1.1&quot;,
        sInfo: &quot;Create an open pose pose image for processing with multi control nets&quot;,
        sExecFile: &quot;../exec/py_std_v1&quot;,
        iConfigGroups: 1,
        iFrameGroups: 1
    }     
},
// ...
</pre></div>
</div>
<p>INPORTANT: Copy the file openpose.json5 from the examples folder from this repository to generative/openpose.json5 in your config.</p>
<p>Finally, you can call the action to generate the pose image needed by the multi control net:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cathy ws launch -c config/your_workspace -a paint_pose
</pre></div>
</div>
</section>
<section id="add-control-net-action-to-your-catharsys-config">
<h3>Add control net action to your catharsys config<a class="headerlink" href="#add-control-net-action-to-your-catharsys-config" title="Link to this heading">#</a></h3>
<p>For using Takuma’s control net, you now have to add the following parts to your config files.</p>
<p>manifest.json5:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>// ...
generative: {
    sDTI: &quot;manifest/action:1&quot;,
    lConfigs: [
        { sId: &quot;cnet_model&quot;, sDTI: &quot;/catharsys/generative/model-id:1&quot;, sForm: &quot;value&quot;, bAddToPath: true },
        { sId: &quot;cnet_config&quot;, sDTI: &quot;/catharsys/generative/data:1&quot;, sForm: &quot;file/json&quot;, bAddToPath: true  }
    ],
    lDeps: [ &quot;render/std&quot; ] // &lt;- this should be your standard render action
},
// ...
</pre></div>
</div>
<p>trial.json5:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>// ...
mConfigs: {
    // ...
    cnet_model: [&quot;Takuma-Diffusers&quot;],
    cnet_config: [&quot;generative/example&quot; ],
    // ...
},
// ...
</pre></div>
</div>
<p>launch.json5:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&quot;generative&quot;: {
    sDTI: &quot;/catharsys/launch/action:1.0&quot;,
    sActionDTI: &quot;/catharsys/action/generative/apply:1.0&quot;,
    mConfig: {
        sDTI: &quot;/catharsys/launch/args:1.1&quot;,
        sInfo: &quot;Perform generative action using control net.&quot;,
        // sExecFile: &quot;../exec/py_lsf_v1&quot;, // &lt;- use this when using lsf
        sExecFile: &quot;../exec/py_std_v1&quot;,
        iConfigGroups: 1,
        iFrameGroups: 1
    }     
},
</pre></div>
</div>
<p>Finally, you need a config file generative/example.json5. Here, several control nets are added as examples. Use the ones you are interested in:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{
    sDTI: &quot;/catharsys/generative/data:1&quot;,

    __locals__: {
        sModelPath: &quot;/path/to/your/models&quot; // &lt;- add here the path to the models folder
    },

    mInputs: {
        // here, all relative path to the outputs of previous results should be added
        // these will be referenced in the sInput to the control nets below
        Depth: &quot;Depth&quot;,
        OpenPose: &quot;AT_Label/asp_skeleton/PoseImage&quot;,
        SemSeg: &quot;AT_Label/semseg_only/Preview&quot;

    },

    mConfig: {
        mParams: {
            pretrained_model_name_or_path: &quot;${sModelPath}/stable-diffusion-v1-5&quot;,
            local_files_only: true,
        },        
        mControlNets: {
            Depth: {
                // these parameters are directly passed to from_pretrained
                mParams: {
                    pretrained_model_name_or_path: &quot;${sModelPath}/sd-controlnet-depth&quot;,
                    local_files_only: true,
                },
                fWeight: 0.6,
                sInput: &quot;Depth&quot;,
                mPreprocess: [
                    &quot;Normalize&quot;,
                    &quot;Invert&quot;,
                ]
            },
            OpenPose: {
                mParams: {
                    pretrained_model_name_or_path: &quot;${sModelPath}/control_v11p_sd15_openpose&quot;,
                    local_files_only: true,
                },
                fWeight: 1.0,
                sInput: &quot;OpenPose&quot;,
            },
            SemSeg: {
                // these parameters are directly passed to from_pretrained
                mParams: {
                    pretrained_model_name_or_path: &quot;${sModelPath}/control_v11p_sd15_seg&quot;,
                    local_files_only: true,
                },
                fWeight: 0.75,
                sInput: &quot;SemSeg&quot;,
            },               
        },
        sPrompt: &quot;men in black suits with ties and dark sunglasses (as in the film men in black or FBI agents)&quot;,
        sNegativePrompt: &quot;bad quality, low res&quot;
    }
}
</pre></div>
</div>
<p>Now, you have everything to perform the generative action:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cathy ws launch -c config/your_workspace -a generative
</pre></div>
</div>
<p>Have fun!</p>
</section>
</section>
<section id="futher-remarks">
<h2>Futher remarks<a class="headerlink" href="#futher-remarks" title="Link to this heading">#</a></h2>
<p>Prompt engineering is the new art. For getting more realistic results, consider these sources:</p>
<ul class="simple">
<li><p>https://stable-diffusion-art.com/realistic-people/</p></li>
</ul>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="index.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Generative AI Action</p>
      </div>
    </a>
    <a class="right-next"
       href="license.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">License</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">Overview</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#install-the-action">Install the Action</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#takuma-multi-control-net">Takuma Multi Control Net</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-open-pose-images-by-paint-pose-action">Create open pose images by paint pose action</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#add-control-net-action-to-your-catharsys-config">Add control net action to your catharsys config</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#futher-remarks">Futher remarks</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Christian Perwass
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2022, Robert Bosch GmbH.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>