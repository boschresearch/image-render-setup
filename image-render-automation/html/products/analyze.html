
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Production Analysis &#8212; Image-Render Automation 3.1.12 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=3cdd2af7"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'products/analyze';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Production Categorization" href="categorize.html" />
    <link rel="prev" title="Configuration File Processing" href="../config_proc.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
  
    <p class="title logo__title">Image-Render Automation 3.1.12 documentation</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../reference/main.html">Reference</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/launch.html">Launch Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/manifest.html">Manifest Configuration</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../workspace/basics.html">Workspace Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workspace/level-1.html">Level 1 - Basic Configuration Details</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../config_proc.html">Configuration File Processing</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="simple">
</ul>
</details></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Production Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="categorize.html">Production Categorization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../back-to-main.html">Back to main documentation</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/products/analyze.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Production Analysis</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#production-configuration">Production Configuration</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#user-variable-details">User Variable Details</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-production-analysis-configuration">The Production Analysis Configuration</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="production-analysis">
<h1>Production Analysis<a class="headerlink" href="#production-analysis" title="Link to this heading">#</a></h1>
<p>When rendering a large number of configurations, it is not uncommon that some could not be rendered, be it due to the job crashing, some missing assets or a bug. It can be quite difficult and time consuming to figure out, whether all the data you wanted to produce is actually available. To simplify this task, there are two <code class="docutils literal notranslate"><span class="pre">cathy</span></code> commands available:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cathy</span> <span class="pre">prod</span> <span class="pre">scan</span> <span class="pre">-c</span> <span class="pre">[configuration</span> <span class="pre">name]</span> <span class="pre">-p</span> <span class="pre">[production</span> <span class="pre">configuration</span> <span class="pre">file]</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cathy</span> <span class="pre">prod</span> <span class="pre">analyze</span> <span class="pre">-c</span> <span class="pre">[configuration</span> <span class="pre">name]</span> <span class="pre">-p</span> <span class="pre">[production</span> <span class="pre">analysis</span> <span class="pre">configuration</span> <span class="pre">file]</span></code></p></li>
</ol>
<p>The first command is simply scanning the file system following a path structure specified in a configuration file (see below). The second command analyses this scan with respect to various aspects that are defined in an analysis configuration file. The idea of splitting this process into two steps is, that you only have to scan the file systems once but can do various analysis runs on this scan.</p>
<p>In the following the two configuration files needed are discussed.</p>
<section id="production-configuration">
<h2>Production Configuration<a class="headerlink" href="#production-configuration" title="Link to this heading">#</a></h2>
<p>The production configuration is typically specified in the file <code class="docutils literal notranslate"><span class="pre">production.json</span></code> that is stored next to your <code class="docutils literal notranslate"><span class="pre">launch.json</span></code> file. (This is also the default file used by the gui image viewer, that can be started with <code class="docutils literal notranslate"><span class="pre">cathy</span> <span class="pre">gui</span> <span class="pre">ws</span></code>.) However, you can have multiple production files and name them differently. The basic idea here is, that you define a path search pattern, where the resultant ‘artefacts’ (images, data files, etc.) of running the Catharsys configuration can be found. To explain the details, consider the following folder tree of some render results as seen on the right:</p>
<a class="float-end reference internal image-reference" href="../_images/artefact-tree-01.png"><img alt="../_images/artefact-tree-01.png" class="float-end" src="../_images/artefact-tree-01.png" style="width: 250px;" />
</a>
<p>We want to search for the rendered images together with the depth and label images that are located in the opened folders on the right. The pattern we define is split into two parts:</p>
<ol class="arabic simple">
<li><p>A group path, that specifies everything down to the folder where the artefact folders start. In this case, one such path is <code class="docutils literal notranslate"><span class="pre">_render/rq0256/level-03/cfg-03-test/Cam_Pin_Std_53deg_FHD/1</span></code>.</p></li>
<li><p>A set of artefact paths that describe the sub-paths that lead to the result data of the different artefacts. For example, one result image is located in the sub-path <code class="docutils literal notranslate"><span class="pre">Image/Frame_0001.png</span></code>, while the corresponding label preview image is under <code class="docutils literal notranslate"><span class="pre">AT_Label/full_res/Preview/Frame_0001.png</span></code>.</p></li>
</ol>
<p>The path patterns can be defined as a combination of fixed path elements, pre-defined variable path elements and user defined, variable path elements. For this example, the path structure pattern looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>!production/!rq/!project/cfg-03-test/?camera/?cfg
</pre></div>
</div>
<p>All elements starting with a ‘!’ are pre-defined variables, while elements starting with ‘?’ are user defined variables. Elements starting with neither are fixed path elements. The meaning of the variables is as follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">!production</span></code>: this is replaced by the main production path for this workspace. It’s the absolute path including the <code class="docutils literal notranslate"><span class="pre">_render</span></code> folder, for example, <code class="docutils literal notranslate"><span class="pre">/data/renders/example/_render</span></code> if your workspace folder is  <code class="docutils literal notranslate"><span class="pre">/data/renders/example</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">!rq</span></code>: the render quality folder, which must be of the form <code class="docutils literal notranslate"><span class="pre">rq[xxxx]</span></code>, where <code class="docutils literal notranslate"><span class="pre">xxxx</span></code> stands for the render quality value.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">!project</span></code>: the current project (confguration) folder. In this example, <code class="docutils literal notranslate"><span class="pre">level-03</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">?camera</span></code>: this is any folder, used as a result dimension <code class="docutils literal notranslate"><span class="pre">camera</span></code>. In this example, <code class="docutils literal notranslate"><span class="pre">Cam_Pin_Std_53deg_FHD</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">?cfg</span></code>: this is any folder, used as a result dimension <code class="docutils literal notranslate"><span class="pre">cfg</span></code>. In this example, <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p></li>
</ul>
<p>The actual artefacts that a scan looks for, are specified with separate path structure patterns, one for each artefact you want to find. For example, the artefacts in this example are specified with the following patterns:</p>
<ul class="simple">
<li><p><strong>Images</strong>: <code class="docutils literal notranslate"><span class="pre">Image/!frame</span></code></p></li>
<li><p><strong>Depth</strong>: <code class="docutils literal notranslate"><span class="pre">AT_Depth/full_res/Preview/!frame</span></code></p></li>
<li><p><strong>Label</strong>: <code class="docutils literal notranslate"><span class="pre">AT_Label/full_res/Preview/!frame</span></code></p></li>
</ul>
<p>The pre-defined variable <code class="docutils literal notranslate"><span class="pre">!frame</span></code> stands for any file with the name pattern <code class="docutils literal notranslate"><span class="pre">Frame_[number].[suffix]</span></code>.</p>
<p>Here is an example <code class="docutils literal notranslate"><span class="pre">production.json</span></code>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;sDTI&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/catharsys/production:1.0&quot;</span><span class="p">,</span>

<span class="w">    </span><span class="nt">&quot;mGroups&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;cfg3&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;sName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Config 3&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;sPathStructure&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;!production/!rq/!project/cfg-03-test/?camera/?cfg&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;mVars&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;cfg-type&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;sName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Config Type&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;camera&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;sName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Camera&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;cfg&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;sName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Config Index&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;mArtefacts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;images&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;sDTI&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/catharsys/production/artefact/image/png:1.0&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;sName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Image&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;sPathStructure&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Image/!frame&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;label&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;sDTI&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/catharsys/production/artefact/image/png:1.0&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;sName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Label&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;sPathStructure&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AT_Label/full_res/Preview/!frame&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;depth&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;sDTI&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/catharsys/production/artefact/image/png:1.0&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;sName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Depth&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;sPathStructure&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AT_Depth/full_res/Preview/!frame&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="c1">// end artefacts</span>
<span class="w">        </span><span class="p">},</span><span class="w"> </span><span class="c1">// end view group</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="c1">// end groups</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You can specify any number of production groups under the <code class="docutils literal notranslate"><span class="pre">mGroups</span></code> element.</p>
<p>If this configuration is stored under the filename <code class="docutils literal notranslate"><span class="pre">production.json5</span></code> in the configuration folder <code class="docutils literal notranslate"><span class="pre">level-03</span></code>, you can initiate a scan of the filesystem with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cathy</span> <span class="n">prod</span> <span class="n">scan</span> <span class="o">-</span><span class="n">c</span> <span class="n">level</span><span class="o">-</span><span class="mi">03</span> <span class="o">-</span><span class="n">p</span> <span class="n">production</span>
</pre></div>
</div>
<p>If your production configuration is not in the same folder as the launch file, then you can also pass a relative or absolute path. The result of the scan is stored in a python pickle file in the <code class="docutils literal notranslate"><span class="pre">_output</span></code> folder of your workspace. You can also specify a different output file path using the command line option <code class="docutils literal notranslate"><span class="pre">-o</span></code>.</p>
<section id="user-variable-details">
<h3>User Variable Details<a class="headerlink" href="#user-variable-details" title="Link to this heading">#</a></h3>
<p>Apart from a display name for user variables, you can also specify a regular expression with the element <code class="docutils literal notranslate"><span class="pre">sRegExParseValue</span></code>. A folder is only accepted as part of a valid path, if it matches the regular expression. For example, if the reglar expression is <code class="docutils literal notranslate"><span class="pre">^(?!Frame_)(.+)</span></code>, only folders are accepted that do <em>not</em> start with <code class="docutils literal notranslate"><span class="pre">Frame_</span></code>.</p>
<p>You can also specify a replace regular expression using the element <code class="docutils literal notranslate"><span class="pre">sRegExReplaceValue</span></code>, which can be used in conjunction with <code class="docutils literal notranslate"><span class="pre">sRegExParseValue</span></code>, to replace the display value of the variable. For example, with</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nt">&quot;sRegExParseValue&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^Frame_(\\d+).png&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;sRegExReplaceValue&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;\\1&quot;</span>
</pre></div>
</div>
<p>only filenames of the type <code class="docutils literal notranslate"><span class="pre">Frame_[number].png</span></code> are accepted, but only the extracted frame number is displayed in the viewer. A full user variable definition could look like this:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;mVars&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;myframe&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;sName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Frame&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;sRegExParseValue&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^Frame_(\\d+).png&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;sRegExReplaceValue&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;\\1&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">    </span><span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="the-production-analysis-configuration">
<h2>The Production Analysis Configuration<a class="headerlink" href="#the-production-analysis-configuration" title="Link to this heading">#</a></h2>
<p>Currently, you can only analyze the file system scan for missing artefacts w.r.t. a single group path variable. The <em>group path</em> is the path structure specified under <code class="docutils literal notranslate"><span class="pre">sPathStructure</span></code> for the a group in the production configuration. For example, the variable <code class="docutils literal notranslate"><span class="pre">cfg</span></code> of the path structure, refers to a configuration index. One typical analysis is to find all those configuration indices for which an artefact is missing. The corresponding analysis configuration looks like this:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;sDTI&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/catharsys/production/analyze:1.0&quot;</span><span class="p">,</span>

<span class="w">    </span><span class="c1">// specify the production configuration file.</span>
<span class="w">    </span><span class="nt">&quot;sPathProdConfig&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;production.json5&quot;</span><span class="p">,</span>

<span class="w">    </span><span class="c1">// List of analysis tests for missing artefacts</span>
<span class="w">    </span><span class="nt">&quot;lAnalyzeMissing&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// The name of this analysis</span>
<span class="w">            </span><span class="nt">&quot;sName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Images&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="c1">// The group id of the production configuration we are referring to</span>
<span class="w">            </span><span class="nt">&quot;sGroupId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cfg3&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="c1">// The id of the group path variable, for which to report missing artefacts</span>
<span class="w">            </span><span class="nt">&quot;sGroupVarId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cfg&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="c1">// The list of artefact ids as defined in the production configuration to look for.</span>
<span class="w">            </span><span class="c1">// If this is an empty list, all artefacts specified in the production configuration</span>
<span class="w">            </span><span class="c1">// are tested for.</span>
<span class="w">            </span><span class="nt">&quot;lArtTypeIds&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;images&quot;</span><span class="p">],</span>

<span class="w">            </span><span class="c1">// The expected values for the variable given in &#39;sGroupVarId&#39;</span>
<span class="w">            </span><span class="c1">// This list can be simply a list of strings or integers specifying the expected elements.</span>
<span class="w">            </span><span class="c1">// For integers, a list element inside the list specifies a range.</span>
<span class="w">            </span><span class="c1">// For example, [[1,4]] = [1,2,3,4]</span>
<span class="w">            </span><span class="nt">&quot;lGroupVarValues&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">]],</span>

<span class="w">            </span><span class="c1">// optional, if defined (even as empty dictionary), the missing data</span>
<span class="w">            </span><span class="c1">// output is printed to stdout</span>
<span class="w">            </span><span class="nt">&quot;mPrint&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="c1">// optional, if true prints ranges of consecutive integer indices</span>
<span class="w">                </span><span class="c1">//           as list elements with first and last index.</span>
<span class="w">                </span><span class="c1">//           For example, instead of printing [3,4,5,6] it prints [[3,6]].</span>
<span class="w">                </span><span class="c1">//           Another example, [3,6,7,8,9] becomes [3,[6,9]].</span>
<span class="w">                </span><span class="nt">&quot;bConcise&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">            </span><span class="p">},</span>

<span class="w">            </span><span class="c1">// optional, if defined (even as empty dictionary), the missing data</span>
<span class="w">            </span><span class="c1">// output is saved to an automatically generated filename.</span>
<span class="w">            </span><span class="nt">&quot;mSave&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="c1">// optional, if this is not specified, an output name is generated automatically.</span>
<span class="w">                </span><span class="c1">// &quot;sPath&quot;: &quot;${path-workspace}/missing.json&quot;,</span>
<span class="w">                </span>
<span class="w">                </span><span class="c1">// optional, how to indent the json output. </span>
<span class="w">                </span><span class="c1">// The default is -1, which means no indentation.</span>
<span class="w">                </span><span class="c1">// &quot;iIndent&quot;: 2,</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">    </span><span class="p">],</span>
<span class="p">}</span>
</pre></div>
</div>
<p>With this configuration the analysis will list all values for the variable <code class="docutils literal notranslate"><span class="pre">cfg</span></code> in the range 1 to 4, for which either the whole configuration or the image artefact is missing. If this configuration is stored in the file <code class="docutils literal notranslate"><span class="pre">prod-analysis.json5</span></code> next to the launch file, the analysis call is,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cathy</span> <span class="n">prod</span> <span class="n">analyze</span> <span class="o">-</span><span class="n">c</span> <span class="n">level</span><span class="o">-</span><span class="mi">03</span> <span class="o">-</span><span class="n">p</span> <span class="n">prod</span><span class="o">-</span><span class="n">analysis</span>
</pre></div>
</div>
<p>The output of this call could look like this:</p>
<img alt="../_images/analysis-output-01.png" src="../_images/analysis-output-01.png" />
<p>The analysis actually found that all expected 10 configurations (as specified in <code class="docutils literal notranslate"><span class="pre">lGroupVarValues</span></code>) are missing for render quality 4 (<code class="docutils literal notranslate"><span class="pre">rq0004</span></code>) and configurations 3 to 10 are missing for render quality 256 (<code class="docutils literal notranslate"><span class="pre">rq0256</span></code>). If you are only interested in one of the render qualities, then replace the <code class="docutils literal notranslate"><span class="pre">!rq</span></code> variable in the production configuration with the corresponding fixed folder name, e.g. <code class="docutils literal notranslate"><span class="pre">rq0256</span></code>.</p>
<p>The analysis result is also stored in a json file. You can use this to re-render a set of configuration indices.</p>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../config_proc.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Configuration File Processing</p>
      </div>
    </a>
    <a class="right-next"
       href="categorize.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Production Categorization</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#production-configuration">Production Configuration</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#user-variable-details">User Variable Details</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-production-analysis-configuration">The Production Analysis Configuration</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Christian Perwass
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2022, Robert Bosch GmbH.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>